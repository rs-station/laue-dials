<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>laue_dials.optimize_indexing &#8212; laue-dials</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=0ca6144b" />
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=c30b9b25"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="icon" href="../_static/rs-favicon_32x32.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="laue_dials.refine" href="refine.html" />
    <link rel="prev" title="laue_dials.sequence_to_stills" href="sequence_to_stills.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="laue-dials-optimize-indexing">
<span id="optimize-indexing"></span><h1>laue_dials.optimize_indexing<a class="headerlink" href="#laue-dials-optimize-indexing" title="Link to this heading"></a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>This script optimizes Miller indices and wavelengths jointly.</p>
<p>This program takes initial monochromatic estimates of the geometry in a
DIALS experiment list and reflection table, and optimizes the indexed
solution by allowing the wavelength to vary. Only Miller indices, s1
vectors, and wavelengths for scattered reflections are overwritten by
this program - all other geometry variables remain constant here.</p>
<p>The outputs are a pair of files (optimized.expt, optimized.refl), which
mimic the input files but with updated Miller indices, s1 vectors, and
wavelengths in the reflection table. Note that the experiment list is
unchanged entirely.</p>
<p>Examples:</p>
<blockquote>
<div><p>laue.optimize_indexing [options] monochromatic.expt monochromatic.refl</p>
</div></blockquote>
</section>
<section id="basic-parameters">
<h2>Basic parameters<a class="headerlink" href="#basic-parameters" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">output</span> <span class="p">{</span>
  <span class="n">experiments</span> <span class="o">=</span> <span class="s1">&#39;optimized.expt&#39;</span>
  <span class="n">reflections</span> <span class="o">=</span> <span class="s1">&#39;optimized.refl&#39;</span>
  <span class="n">log</span> <span class="o">=</span> <span class="s1">&#39;laue.optimize_indexing.log&#39;</span>
<span class="p">}</span>
<span class="n">geometry</span> <span class="p">{</span>
  <span class="n">unit_cell</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">}</span>
<span class="n">filter_spectrum</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">keep_unindexed</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">nproc</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">n_macrocycles</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">wavelengths</span> <span class="p">{</span>
  <span class="n">lam_min</span> <span class="o">=</span> <span class="kc">None</span>
  <span class="n">lam_max</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">}</span>
<span class="n">reciprocal_grid</span> <span class="p">{</span>
  <span class="n">d_min</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="full-parameter-definitions">
<h2>Full parameter definitions<a class="headerlink" href="#full-parameter-definitions" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">output</span> <span class="p">{</span>
  <span class="n">experiments</span> <span class="o">=</span> <span class="s1">&#39;optimized.expt&#39;</span>
    <span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;The output experiment list filename.&quot;</span>
    <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">str</span>
  <span class="n">reflections</span> <span class="o">=</span> <span class="s1">&#39;optimized.refl&#39;</span>
    <span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;The output reflection table filename.&quot;</span>
    <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">str</span>
  <span class="n">log</span> <span class="o">=</span> <span class="s1">&#39;laue.optimize_indexing.log&#39;</span>
    <span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;The log filename.&quot;</span>
    <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">str</span>
<span class="p">}</span>
<span class="n">geometry</span> <span class="p">{</span>
  <span class="n">unit_cell</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;Target unit cell for indexing.&quot;</span>
    <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">floats</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">filter_spectrum</span> <span class="o">=</span> <span class="kc">True</span>
  <span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;Whether to remove reflections outside of the provided wavelength&quot;</span>
          <span class="s2">&quot;limits.&quot;</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">bool</span>
<span class="n">keep_unindexed</span> <span class="o">=</span> <span class="kc">False</span>
  <span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;Whether to keep unindexed reflections.&quot;</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">bool</span>
<span class="n">nproc</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;Number of parallel processes to run.&quot;</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">n_macrocycles</span> <span class="o">=</span> <span class="mi">3</span>
  <span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;Number of macrocycles of index optimization to perform.&quot;</span>
  <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value_min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">wavelengths</span> <span class="p">{</span>
  <span class="n">lam_min</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;Minimum wavelength for beam spectrum.&quot;</span>
    <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value_min</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
  <span class="n">lam_max</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;Maximum wavelength for beam spectrum.&quot;</span>
    <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value_min</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">reciprocal_grid</span> <span class="p">{</span>
  <span class="n">d_min</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="s2">&quot;Minimum d-spacing for reflecting planes.&quot;</span>
    <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value_min</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">laue_dials</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributions &amp; Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/notebooks.html">Contents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/notebooks.html#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="functions.html">Command-Line Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="find_spots.html">laue_dials.find_spots</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html">laue_dials.index</a></li>
<li class="toctree-l2"><a class="reference internal" href="sequence_to_stills.html">laue_dials.sequence_to_stills</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">laue_dials.optimize_indexing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic-parameters">Basic parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#full-parameter-definitions">Full parameter definitions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="refine.html">laue_dials.refine</a></li>
<li class="toctree-l2"><a class="reference internal" href="predict.html">laue_dials.predict</a></li>
<li class="toctree-l2"><a class="reference internal" href="integrate.html">laue_dials.integrate</a></li>
<li class="toctree-l2"><a class="reference internal" href="plot_wavelengths.html">laue_dials.plot_wavelengths</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_rmsds.html">laue_dials.compute_rmsds</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/modules.html">Full API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/tutorials.html">Jupyter Tutorials</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="functions.html">Functions</a><ul>
      <li>Previous: <a href="sequence_to_stills.html" title="previous chapter">laue_dials.sequence_to_stills</a></li>
      <li>Next: <a href="refine.html" title="next chapter">laue_dials.refine</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Rick Hewitt.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/cli/optimize_indexing.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>